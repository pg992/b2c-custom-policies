<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<TrustFrameworkPolicy
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:xsd="http://www.w3.org/2001/XMLSchema"
  xmlns="http://schemas.microsoft.com/online/cpim/schemas/2013/06"
  PolicySchemaVersion="0.3.0.0"
  TenantId="delfi.onmicrosoft.com"
  PolicyId="B2C_1A_TrustFrameworkBase_OFMP"
  PublicPolicyUri="http://delfi.onmicrosoft.com/B2C_1A_TrustFrameworkBase_OFMP">

  <BuildingBlocks>
    <ClaimsSchema>
      <!-- The ClaimsSchema is divided into three sections:
           1. Section I lists the minimum claims that are required for the user journeys to work properly.
           2. Section II lists the claims required for query string parameters and other special parameters 
              to be passed to other claims providers, esp. login.microsoftonline.com for authentication. 
              Please do not modify these claims.
           3. Section III lists any additional (optional) claims that can be collected from the user, stored 
              in the directory and sent in tokens during sign in. Add new claims to be collected from the user 
              and/or sent in the token in Section III. -->

      <!-- NOTE: The claims schema contains restrictions on certain claims such as passwords and usernames. 
           The trust framework policy treats Azure AD as any other claims provider and all its restrictions 
           are modelled in the policy. A policy could be modified to add more restrictions, or use another 
           claims provider for credential storage which will have its own restrictions. -->

      <!-- SECTION I: Claims required for user journeys to work properly -->

      <ClaimType Id="socialIdpUserId">
        <DisplayName>Username</DisplayName>
        <DataType>string</DataType>
        <UserHelpText/>
        <UserInputType>TextBox</UserInputType>
        <Restriction>
          <Pattern RegularExpression="^[a-zA-Z0-9]+[a-zA-Z0-9_-]*$" HelpText="The username you provided is not valid. It must begin with an alphabet or number and can contain alphabets, numbers and the following symbols: _ -" />
        </Restriction>
      </ClaimType>

      <ClaimType Id="tenantId">
        <DisplayName>User's Object's Tenant ID</DisplayName>
        <DataType>string</DataType>
        <DefaultPartnerClaimTypes>
          <Protocol Name="OAuth2" PartnerClaimType="tid" />
          <Protocol Name="OpenIdConnect" PartnerClaimType="tid" />
          <Protocol Name="SAML2" PartnerClaimType="http://schemas.microsoft.com/identity/claims/tenantid" />
        </DefaultPartnerClaimTypes>
        <UserHelpText>Tenant identifier (ID) of the user object in Azure AD.</UserHelpText>
      </ClaimType>

      <ClaimType Id="objectId">
        <DisplayName>User's Object ID</DisplayName>
        <DataType>string</DataType>
        <DefaultPartnerClaimTypes>
          <Protocol Name="OAuth2" PartnerClaimType="oid" />
          <Protocol Name="OpenIdConnect" PartnerClaimType="oid" />
          <Protocol Name="SAML2" PartnerClaimType="http://schemas.microsoft.com/identity/claims/objectidentifier" />
        </DefaultPartnerClaimTypes>
        <UserHelpText>Object identifier (ID) of the user object in Azure AD.</UserHelpText>
      </ClaimType>

      <!-- Claims needed for local accounts. -->
      <ClaimType Id="signInName">
        <DisplayName>Sign in name</DisplayName>
        <DataType>string</DataType>
        <UserHelpText/>
        <UserInputType>TextBox</UserInputType>
      </ClaimType>

      <ClaimType Id="signInNames.emailAddress">
        <DisplayName>Email Address</DisplayName>
        <DataType>string</DataType>
        <UserHelpText>Email address to use for signing in.</UserHelpText>
        <UserInputType>TextBox</UserInputType>
      </ClaimType>
	  
      <ClaimType Id="accountEnabled">
        <DisplayName>Account Enabled</DisplayName>
        <DataType>boolean</DataType>
        <AdminHelpText>Specifies whether the user's account is enabled.</AdminHelpText>
        <UserHelpText>Specifies whether your account is enabled.</UserHelpText>
      </ClaimType>

      <ClaimType Id="password">
        <DisplayName>Password</DisplayName>
        <DataType>string</DataType>
        <UserHelpText>Enter password</UserHelpText>
        <UserInputType>Password</UserInputType>
      </ClaimType>

      <!-- The claim types newPassword and reenterPassword are considered special, please do not change the names. 
           The UI validates that the user correctly re-entered their password during account creation based on these 
           claim types.	  -->
      <ClaimType Id="newPassword">
        <DisplayName>New password</DisplayName>
        <DataType>string</DataType>
        <UserHelpText>Enter new password</UserHelpText>
        <UserInputType>Password</UserInputType>
        <Restriction>
          <Pattern RegularExpression="^((?=.*[a-z])(?=.*[A-Z])(?=.*\d)|(?=.*[a-z])(?=.*[A-Z])(?=.*[^A-Za-z0-9])|(?=.*[a-z])(?=.*\d)(?=.*[^A-Za-z0-9])|(?=.*[A-Z])(?=.*\d)(?=.*[^A-Za-z0-9]))([A-Za-z\d@#$%^&amp;*\-_+=[\]{}|\\:',?/`~&quot;();!]|\.(?!@)){8,16}$" HelpText="8-16 characters, containing 3 out of 4 of the following: Lowercase characters, uppercase characters, digits (0-9), and one or more of the following symbols: @ # $ % ^ &amp; * - _ + = [ ] { } | \ : ' , ? / ` ~ &quot; ( ) ; ." />
        </Restriction>
      </ClaimType>
      <!-- The password regular expression above is constructed for AAD passwords based on restrictions at https://msdn.microsoft.com/en-us/library/azure/jj943764.aspx

        ^( # one of the following four combinations must appear in the password
         (?=.*[a-z])(?=.*[A-Z])(?=.*\d) |            # matches lower case, upper case or digit
         (?=.*[a-z])(?=.*[A-Z])(?=.*[^A-Za-z0-9]) |  # matches lower case, upper case or special character (i.e. non-alpha or digit)
         (?=.*[a-z])(?=.*\d)(?=.*[^A-Za-z0-9]) |     # matches lower case, digit, or special character
         (?=.*[A-Z])(?=.*\d)(?=.*[^A-Za-z0-9])       # matches upper case, digit, or special character
        )
        ( # The password must match the following restrictions
         [A-Za-z\d@#$%^&*\-_+=[\]{}|\\:',?/`~"();!] |   # The list of all acceptable characters (without .)
         \.(?!@)                                        # or . can appear as long as not followed by @
        ) {8,16}$                                       # the length must be between 8 and 16 chars inclusive

      -->

      <ClaimType Id="reenterPassword">
        <DisplayName>Confirm new Password</DisplayName>
        <DataType>string</DataType>
        <UserHelpText>Confirm new password</UserHelpText>
        <UserInputType>Password</UserInputType>
        <Restriction>
          <Pattern RegularExpression="^((?=.*[a-z])(?=.*[A-Z])(?=.*\d)|(?=.*[a-z])(?=.*[A-Z])(?=.*[^A-Za-z0-9])|(?=.*[a-z])(?=.*\d)(?=.*[^A-Za-z0-9])|(?=.*[A-Z])(?=.*\d)(?=.*[^A-Za-z0-9]))([A-Za-z\d@#$%^&amp;*\-_+=[\]{}|\\:',?/`~&quot;();!]|\.(?!@)){8,16}$" HelpText=" " />
        </Restriction>
      </ClaimType>

      <ClaimType Id="passwordPolicies">
        <DisplayName>Password Policies</DisplayName>
        <DataType>string</DataType>
        <UserHelpText>Password policies used by Azure AD to determine password strength, expiry etc.</UserHelpText>
      </ClaimType>

      <ClaimType Id="client_id">
        <DisplayName>client_id</DisplayName>
        <DataType>string</DataType>
        <AdminHelpText>Special parameter passed to EvoSTS.</AdminHelpText>
        <UserHelpText>Special parameter passed to EvoSTS.</UserHelpText>
      </ClaimType>

      <ClaimType Id="resource_id">
        <DisplayName>resource_id</DisplayName>
        <DataType>string</DataType>
        <AdminHelpText>Special parameter passed to EvoSTS.</AdminHelpText>
        <UserHelpText>Special parameter passed to EvoSTS.</UserHelpText>
      </ClaimType>

      <ClaimType Id="sub">
        <DisplayName>Subject</DisplayName>
        <DataType>string</DataType>
        <DefaultPartnerClaimTypes>
          <Protocol Name="OpenIdConnect" PartnerClaimType="sub" />
        </DefaultPartnerClaimTypes>
        <UserHelpText/>
      </ClaimType>

      <ClaimType Id="identityProvider">
        <DisplayName>Identity Provider</DisplayName>
        <DataType>string</DataType>
        <DefaultPartnerClaimTypes>
          <Protocol Name="OAuth2" PartnerClaimType="idp" />
          <Protocol Name="OpenIdConnect" PartnerClaimType="idp" />
          <Protocol Name="SAML2" PartnerClaimType="http://schemas.microsoft.com/identity/claims/identityprovider" />
        </DefaultPartnerClaimTypes>
        <UserHelpText/>
      </ClaimType>

      <ClaimType Id="displayName">
        <DisplayName>Display Name</DisplayName>
        <DataType>string</DataType>
        <DefaultPartnerClaimTypes>
          <Protocol Name="OAuth2" PartnerClaimType="unique_name" />
          <Protocol Name="OpenIdConnect" PartnerClaimType="name" />
          <Protocol Name="SAML2" PartnerClaimType="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name" />
        </DefaultPartnerClaimTypes>
        <UserHelpText>Your display name.</UserHelpText>
        <UserInputType>TextBox</UserInputType>
      </ClaimType>

      <ClaimType Id="email">
        <DisplayName>Email Address</DisplayName>
        <DataType>string</DataType>
        <DefaultPartnerClaimTypes>
          <Protocol Name="OpenIdConnect" PartnerClaimType="email" />
        </DefaultPartnerClaimTypes>
        <UserHelpText>Email address that can be used to contact you.</UserHelpText>
        <UserInputType>TextBox</UserInputType>
        <Restriction>
          <Pattern RegularExpression="^[a-zA-Z0-9.!#$%&amp;'^_`{}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$" HelpText="Please enter a valid email address." />
        </Restriction>
      </ClaimType>

      <ClaimType Id="otherMails">
        <DisplayName>Alternate Email Addresses</DisplayName>
        <DataType>stringCollection</DataType>
        <UserHelpText>Email addresses that can be used to contact the user.</UserHelpText>
      </ClaimType>

      <ClaimType Id="userPrincipalName">
        <DisplayName>UserPrincipalName</DisplayName>
        <DataType>string</DataType>
        <DefaultPartnerClaimTypes>
          <Protocol Name="OAuth2" PartnerClaimType="upn" />
          <Protocol Name="OpenIdConnect" PartnerClaimType="upn" />
          <Protocol Name="SAML2" PartnerClaimType="http://schemas.microsoft.com/identity/claims/userprincipalname" />
        </DefaultPartnerClaimTypes>
        <UserHelpText>Your user name as stored in the Azure Active Directory.</UserHelpText>
      </ClaimType>

      <ClaimType Id="upnUserName">
        <DisplayName>UPN User Name</DisplayName>
        <DataType>string</DataType>
        <UserHelpText>The user name for creating user principal name.</UserHelpText>
      </ClaimType>

      <ClaimType Id="newUser">
        <DisplayName>User is new</DisplayName>
        <DataType>boolean</DataType>
        <UserHelpText/>
      </ClaimType>

      <ClaimType Id="executed-SelfAsserted-Input">
        <DisplayName>Executed-SelfAsserted-Input</DisplayName>
        <DataType>string</DataType>
        <UserHelpText>A claim that specifies whether attributes were collected from the user.</UserHelpText>
      </ClaimType>

      <ClaimType Id="authenticationSource">
        <DisplayName>AuthenticationSource</DisplayName>
        <DataType>string</DataType>
        <UserHelpText>Specifies whether the user was authenticated at Social IDP or local account.</UserHelpText>
      </ClaimType>

      <!-- SECTION II: Claims required to pass on special parameters (including some query string parameters) to other claims providers -->

      <ClaimType Id="nca">
        <DisplayName>nca</DisplayName>
        <DataType>string</DataType>
        <UserHelpText>Special parameter passed for local account authentication to login.microsoftonline.com.</UserHelpText>
      </ClaimType>

      <ClaimType Id="grant_type">
        <DisplayName>grant_type</DisplayName>
        <DataType>string</DataType>
        <UserHelpText>Special parameter passed for local account authentication to login.microsoftonline.com.</UserHelpText>
      </ClaimType>

      <ClaimType Id="scope">
        <DisplayName>scope</DisplayName>
        <DataType>string</DataType>
        <UserHelpText>Special parameter passed for local account authentication to login.microsoftonline.com.</UserHelpText>
      </ClaimType>

      <ClaimType Id="objectIdFromSession">
        <DisplayName>objectIdFromSession</DisplayName>
        <DataType>boolean</DataType>
        <UserHelpText>Parameter provided by the default session management provider to indicate that the object id has been retrieved from an SSO session.</UserHelpText>
      </ClaimType>

      <ClaimType Id="isActiveMFASession">
        <DisplayName>isActiveMFASession</DisplayName>
        <DataType>boolean</DataType>
        <UserHelpText>Parameter provided by the MFA session management to indicate that the user has an active MFA session.</UserHelpText>
      </ClaimType>

      <!-- SECTION III: Additional claims that can be collected from the users, stored in the directory, and sent in the token. Add additional claims here. -->

      <ClaimType Id="givenName">
        <DisplayName>First name</DisplayName>
        <DataType>string</DataType>
        <DefaultPartnerClaimTypes>
          <Protocol Name="OAuth2" PartnerClaimType="given_name" />
          <Protocol Name="OpenIdConnect" PartnerClaimType="given_name" />
          <Protocol Name="SAML2" PartnerClaimType="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname" />
        </DefaultPartnerClaimTypes>
        <UserHelpText>Your given name (also known as first name).</UserHelpText>
        <UserInputType>TextBox</UserInputType>
      </ClaimType>

      <ClaimType Id="surname">
        <DisplayName>Last name</DisplayName>
        <DataType>string</DataType>
        <DefaultPartnerClaimTypes>
          <Protocol Name="OAuth2" PartnerClaimType="family_name" />
          <Protocol Name="OpenIdConnect" PartnerClaimType="family_name" />
          <Protocol Name="SAML2" PartnerClaimType="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/surname" />
        </DefaultPartnerClaimTypes>
        <UserHelpText>Your surname (also known as family name or last name).</UserHelpText>
        <UserInputType>TextBox</UserInputType>
      </ClaimType>

      <ClaimType Id="extension_CompanyName">
        <DisplayName>Company</DisplayName>
        <DataType>string</DataType>
        <UserHelpText>The entity that employs the user.</UserHelpText>
        <UserInputType>TextBox</UserInputType>
      </ClaimType>

      <ClaimType Id="extension_Phonenumber">
        <DisplayName>Phone number</DisplayName>
        <DataType>string</DataType>
        <UserHelpText>The entity that employs the user.</UserHelpText>
        <UserInputType>TextBox</UserInputType>
      </ClaimType>

      <ClaimType Id="country">
        <DisplayName>Country</DisplayName>
        <DataType>string</DataType>
        <UserHelpText>The country/region in which the user is located.</UserHelpText>
        <UserInputType>DropdownSingleSelect</UserInputType>
        <Restriction>
          <Enumeration Text="Afghanistan" Value="Afghanistan" SelectByDefault="false" />
          <Enumeration Text="Åland Islands" Value="Åland Islands" SelectByDefault="false" />
          <Enumeration Text="Albania" Value="Albania" SelectByDefault="false" />
          <Enumeration Text="Algeria" Value="Algeria" SelectByDefault="false" />
          <Enumeration Text="American Samoa" Value="American Samoa" SelectByDefault="false" />
          <Enumeration Text="Andorra" Value="Andorra" SelectByDefault="false" />
          <Enumeration Text="Angola" Value="Angola" SelectByDefault="false" />
          <Enumeration Text="Anguilla" Value="Anguilla" SelectByDefault="false" />
          <Enumeration Text="Antarctica" Value="Antarctica" SelectByDefault="false" />
          <Enumeration Text="Antigua and Barbuda" Value="Antigua and Barbuda" SelectByDefault="false" />
          <Enumeration Text="Argentina" Value="Argentina" SelectByDefault="false" />
          <Enumeration Text="Armenia" Value="Armenia" SelectByDefault="false" />
          <Enumeration Text="Aruba" Value="Aruba" SelectByDefault="false" />
          <Enumeration Text="Australia" Value="Australia" SelectByDefault="false" />
          <Enumeration Text="Austria" Value="Austria" SelectByDefault="false" />
          <Enumeration Text="Azerbaijan" Value="Azerbaijan" SelectByDefault="false" />
          <Enumeration Text="Bahamas" Value="Bahamas" SelectByDefault="false" />
          <Enumeration Text="Bahrain" Value="Bahrain" SelectByDefault="false" />
          <Enumeration Text="Bangladesh" Value="Bangladesh" SelectByDefault="false" />
          <Enumeration Text="Barbados" Value="Barbados" SelectByDefault="false" />
          <Enumeration Text="Belarus" Value="Belarus" SelectByDefault="false" />
          <Enumeration Text="Belgium" Value="Belgium" SelectByDefault="false" />
          <Enumeration Text="Belize" Value="Belize" SelectByDefault="false" />
          <Enumeration Text="Benin" Value="Benin" SelectByDefault="false" />
          <Enumeration Text="Bermuda" Value="Bermuda" SelectByDefault="false" />
          <Enumeration Text="Bhutan" Value="Bhutan" SelectByDefault="false" />
          <Enumeration Text="Bolivia" Value="Bolivia" SelectByDefault="false" />
          <Enumeration Text="Bonaire" Value="Bonaire" SelectByDefault="false" />
          <Enumeration Text="Bosnia and Herzegovina" Value="Bosnia and Herzegovina" SelectByDefault="false" />
          <Enumeration Text="Botswana" Value="Botswana" SelectByDefault="false" />
          <Enumeration Text="Bouvet Island" Value="Bouvet Island" SelectByDefault="false" />
          <Enumeration Text="Brazil" Value="Brazil" SelectByDefault="false" />
          <Enumeration Text="British Indian Ocean Territory" Value="British Indian Ocean Territory" SelectByDefault="false" />
          <Enumeration Text="British Virgin Islands" Value="British Virgin Islands" SelectByDefault="false" />
          <Enumeration Text="Brunei" Value="Brunei" SelectByDefault="false" />
          <Enumeration Text="Bulgaria" Value="Bulgaria" SelectByDefault="false" />
          <Enumeration Text="Burkina Faso" Value="Burkina Faso" SelectByDefault="false" />
          <Enumeration Text="Burundi" Value="Burundi" SelectByDefault="false" />
          <Enumeration Text="Cabo Verde" Value="Cabo Verde" SelectByDefault="false" />
          <Enumeration Text="Cambodia" Value="Cambodia" SelectByDefault="false" />
          <Enumeration Text="Cameroon" Value="Cameroon" SelectByDefault="false" />
          <Enumeration Text="Canada" Value="Canada" SelectByDefault="false" />
          <Enumeration Text="Cayman Islands" Value="Cayman Islands" SelectByDefault="false" />
          <Enumeration Text="Central African Republic" Value="Central African Republic" SelectByDefault="false" />
          <Enumeration Text="Chad" Value="Chad" SelectByDefault="false" />
          <Enumeration Text="Chile" Value="Chile" SelectByDefault="false" />
          <Enumeration Text="China" Value="China" SelectByDefault="false" />
          <Enumeration Text="Christmas Island" Value="Christmas Island" SelectByDefault="false" />
          <Enumeration Text="Cocos (Keeling) Islands" Value="Cocos (Keeling) Islands" SelectByDefault="false" />
          <Enumeration Text="Colombia" Value="Colombia" SelectByDefault="false" />
          <Enumeration Text="Comoros" Value="Comoros" SelectByDefault="false" />
          <Enumeration Text="Congo" Value="Congo" SelectByDefault="false" />
          <Enumeration Text="Congo (DRC)" Value="Congo (DRC)" SelectByDefault="false" />
          <Enumeration Text="Cook Islands" Value="Cook Islands" SelectByDefault="false" />
          <Enumeration Text="Costa Rica" Value="Costa Rica" SelectByDefault="false" />
          <Enumeration Text="Côte d’Ivoire" Value="Côte d’Ivoire" SelectByDefault="false" />
          <Enumeration Text="Croatia" Value="Croatia" SelectByDefault="false" />
          <Enumeration Text="Cuba" Value="Cuba" SelectByDefault="false" />
          <Enumeration Text="Curaçao" Value="Curaçao" SelectByDefault="false" />
          <Enumeration Text="Cyprus" Value="Cyprus" SelectByDefault="false" />
          <Enumeration Text="Czech Republic" Value="Czech Republic" SelectByDefault="false" />
          <Enumeration Text="Denmark" Value="Denmark" SelectByDefault="false" />
          <Enumeration Text="Djibouti" Value="Djibouti" SelectByDefault="false" />
          <Enumeration Text="Dominica" Value="Dominica" SelectByDefault="false" />
          <Enumeration Text="Dominican Republic" Value="Dominican Republic" SelectByDefault="false" />
          <Enumeration Text="Ecuador" Value="Ecuador" SelectByDefault="false" />
          <Enumeration Text="Egypt" Value="Egypt" SelectByDefault="false" />
          <Enumeration Text="El Salvador" Value="El Salvador" SelectByDefault="false" />
          <Enumeration Text="Equatorial Guinea" Value="Equatorial Guinea" SelectByDefault="false" />
          <Enumeration Text="Eritrea" Value="Eritrea" SelectByDefault="false" />
          <Enumeration Text="Estonia" Value="Estonia" SelectByDefault="false" />
          <Enumeration Text="Ethiopia" Value="Ethiopia" SelectByDefault="false" />
          <Enumeration Text="Falkland Islands" Value="Falkland Islands" SelectByDefault="false" />
          <Enumeration Text="Faroe Islands" Value="Faroe Islands" SelectByDefault="false" />
          <Enumeration Text="Fiji" Value="Fiji" SelectByDefault="false" />
          <Enumeration Text="Finland" Value="Finland" SelectByDefault="false" />
          <Enumeration Text="France" Value="France" SelectByDefault="false" />
          <Enumeration Text="French Guiana" Value="French Guiana" SelectByDefault="false" />
          <Enumeration Text="French Polynesia" Value="French Polynesia" SelectByDefault="false" />
          <Enumeration Text="French Southern Territories" Value="French Southern Territories" SelectByDefault="false" />
          <Enumeration Text="Gabon" Value="Gabon" SelectByDefault="false" />
          <Enumeration Text="Gambia" Value="Gambia" SelectByDefault="false" />
          <Enumeration Text="Georgia" Value="Georgia" SelectByDefault="false" />
          <Enumeration Text="Germany" Value="Germany" SelectByDefault="false" />
          <Enumeration Text="Ghana" Value="Ghana" SelectByDefault="false" />
          <Enumeration Text="Gibraltar" Value="Gibraltar" SelectByDefault="false" />
          <Enumeration Text="Greece" Value="Greece" SelectByDefault="false" />
          <Enumeration Text="Greenland" Value="Greenland" SelectByDefault="false" />
          <Enumeration Text="Grenada" Value="Grenada" SelectByDefault="false" />
          <Enumeration Text="Guadeloupe" Value="Guadeloupe" SelectByDefault="false" />
          <Enumeration Text="Guam" Value="Guam" SelectByDefault="false" />
          <Enumeration Text="Guatemala" Value="Guatemala" SelectByDefault="false" />
          <Enumeration Text="Guernsey" Value="Guernsey" SelectByDefault="false" />
          <Enumeration Text="Guinea" Value="Guinea" SelectByDefault="false" />
          <Enumeration Text="Guinea-Bissau" Value="Guinea-Bissau" SelectByDefault="false" />
          <Enumeration Text="Guyana" Value="Guyana" SelectByDefault="false" />
          <Enumeration Text="Haiti" Value="Haiti" SelectByDefault="false" />
          <Enumeration Text="Heard Island and McDonald Islands" Value="Heard Island and McDonald Islands" SelectByDefault="false" />
          <Enumeration Text="Honduras" Value="Honduras" SelectByDefault="false" />
          <Enumeration Text="Hong Kong SAR" Value="Hong Kong SAR" SelectByDefault="false" />
          <Enumeration Text="Hungary" Value="Hungary" SelectByDefault="false" />
          <Enumeration Text="Iceland" Value="Iceland" SelectByDefault="false" />
          <Enumeration Text="India" Value="India" SelectByDefault="false" />
          <Enumeration Text="Indonesia" Value="Indonesia" SelectByDefault="false" />
          <Enumeration Text="Iran" Value="Iran" SelectByDefault="false" />
          <Enumeration Text="Iraq" Value="Iraq" SelectByDefault="false" />
          <Enumeration Text="Ireland" Value="Ireland" SelectByDefault="false" />
          <Enumeration Text="Isle of Man" Value="Isle of Man" SelectByDefault="false" />
          <Enumeration Text="Israel" Value="Israel" SelectByDefault="false" />
          <Enumeration Text="Italy" Value="Italy" SelectByDefault="false" />
          <Enumeration Text="Jamaica" Value="Jamaica" SelectByDefault="false" />
          <Enumeration Text="Jan Mayen" Value="Jan Mayen" SelectByDefault="false" />
          <Enumeration Text="Japan" Value="Japan" SelectByDefault="false" />
          <Enumeration Text="Jersey" Value="Jersey" SelectByDefault="false" />
          <Enumeration Text="Jordan" Value="Jordan" SelectByDefault="false" />
          <Enumeration Text="Kazakhstan" Value="Kazakhstan" SelectByDefault="false" />
          <Enumeration Text="Kenya" Value="Kenya" SelectByDefault="false" />
          <Enumeration Text="Kiribati" Value="Kiribati" SelectByDefault="false" />
          <Enumeration Text="Korea" Value="Korea" SelectByDefault="false" />
          <Enumeration Text="Kosovo" Value="Kosovo" SelectByDefault="false" />
          <Enumeration Text="Kuwait" Value="Kuwait" SelectByDefault="false" />
          <Enumeration Text="Kyrgyzstan" Value="Kyrgyzstan" SelectByDefault="false" />
          <Enumeration Text="Laos" Value="Laos" SelectByDefault="false" />
          <Enumeration Text="Latvia" Value="Latvia" SelectByDefault="false" />
          <Enumeration Text="Lebanon" Value="Lebanon" SelectByDefault="false" />
          <Enumeration Text="Lesotho" Value="Lesotho" SelectByDefault="false" />
          <Enumeration Text="Liberia" Value="Liberia" SelectByDefault="false" />
          <Enumeration Text="Libya" Value="Libya" SelectByDefault="false" />
          <Enumeration Text="Liechtenstein" Value="Liechtenstein" SelectByDefault="false" />
          <Enumeration Text="Lithuania" Value="Lithuania" SelectByDefault="false" />
          <Enumeration Text="Luxembourg" Value="Luxembourg" SelectByDefault="false" />
          <Enumeration Text="Macao SAR" Value="Macao SAR" SelectByDefault="false" />
          <Enumeration Text="Macedonia, FYRO" Value="Macedonia, FYRO" SelectByDefault="false" />
          <Enumeration Text="Madagascar" Value="Madagascar" SelectByDefault="false" />
          <Enumeration Text="Malawi" Value="Malawi" SelectByDefault="false" />
          <Enumeration Text="Malaysia" Value="Malaysia" SelectByDefault="false" />
          <Enumeration Text="Maldives" Value="Maldives" SelectByDefault="false" />
          <Enumeration Text="Mali" Value="Mali" SelectByDefault="false" />
          <Enumeration Text="Malta" Value="Malta" SelectByDefault="false" />
          <Enumeration Text="Marshall Islands" Value="Marshall Islands" SelectByDefault="false" />
          <Enumeration Text="Martinique" Value="Martinique" SelectByDefault="false" />
          <Enumeration Text="Mauritania" Value="Mauritania" SelectByDefault="false" />
          <Enumeration Text="Mauritius" Value="Mauritius" SelectByDefault="false" />
          <Enumeration Text="Mayotte" Value="Mayotte" SelectByDefault="false" />
          <Enumeration Text="Mexico" Value="Mexico" SelectByDefault="false" />
          <Enumeration Text="Micronesia" Value="Micronesia" SelectByDefault="false" />
          <Enumeration Text="Moldova" Value="Moldova" SelectByDefault="false" />
          <Enumeration Text="Monaco" Value="Monaco" SelectByDefault="false" />
          <Enumeration Text="Mongolia" Value="Mongolia" SelectByDefault="false" />
          <Enumeration Text="Montenegro" Value="Montenegro" SelectByDefault="false" />
          <Enumeration Text="Montserrat" Value="Montserrat" SelectByDefault="false" />
          <Enumeration Text="Morocco" Value="Morocco" SelectByDefault="false" />
          <Enumeration Text="Mozambique" Value="Mozambique" SelectByDefault="false" />
          <Enumeration Text="Myanmar" Value="Myanmar" SelectByDefault="false" />
          <Enumeration Text="Namibia" Value="Namibia" SelectByDefault="false" />
          <Enumeration Text="Nauru" Value="Nauru" SelectByDefault="false" />
          <Enumeration Text="Nepal" Value="Nepal" SelectByDefault="false" />
          <Enumeration Text="Netherlands" Value="Netherlands" SelectByDefault="false" />
          <Enumeration Text="New Caledonia" Value="New Caledonia" SelectByDefault="false" />
          <Enumeration Text="New Zealand" Value="New Zealand" SelectByDefault="false" />
          <Enumeration Text="Nicaragua" Value="Nicaragua" SelectByDefault="false" />
          <Enumeration Text="Niger" Value="Niger" SelectByDefault="false" />
          <Enumeration Text="Nigeria" Value="Nigeria" SelectByDefault="false" />
          <Enumeration Text="Niue" Value="Niue" SelectByDefault="false" />
          <Enumeration Text="Norfolk Island" Value="Norfolk Island" SelectByDefault="false" />
          <Enumeration Text="North Korea" Value="North Korea" SelectByDefault="false" />
          <Enumeration Text="Northern Mariana Islands" Value="Northern Mariana Islands" SelectByDefault="false" />
          <Enumeration Text="Norway" Value="Norway" SelectByDefault="false" />
          <Enumeration Text="Oman" Value="Oman" SelectByDefault="false" />
          <Enumeration Text="Pakistan" Value="Pakistan" SelectByDefault="false" />
          <Enumeration Text="Palau" Value="Palau" SelectByDefault="false" />
          <Enumeration Text="Palestinian Authority" Value="Palestinian Authority" SelectByDefault="false" />
          <Enumeration Text="Panama" Value="Panama" SelectByDefault="false" />
          <Enumeration Text="Papua New Guinea" Value="Papua New Guinea" SelectByDefault="false" />
          <Enumeration Text="Paraguay" Value="Paraguay" SelectByDefault="false" />
          <Enumeration Text="Peru" Value="Peru" SelectByDefault="false" />
          <Enumeration Text="Philippines" Value="Philippines" SelectByDefault="false" />
          <Enumeration Text="Pitcairn Islands" Value="Pitcairn Islands" SelectByDefault="false" />
          <Enumeration Text="Poland" Value="Poland" SelectByDefault="false" />
          <Enumeration Text="Portugal" Value="Portugal" SelectByDefault="false" />
          <Enumeration Text="Puerto Rico" Value="Puerto Rico" SelectByDefault="false" />
          <Enumeration Text="Qatar" Value="Qatar" SelectByDefault="false" />
          <Enumeration Text="Réunion" Value="Réunion" SelectByDefault="false" />
          <Enumeration Text="Romania" Value="Romania" SelectByDefault="false" />
          <Enumeration Text="Russia" Value="Russia" SelectByDefault="false" />
          <Enumeration Text="Rwanda" Value="Rwanda" SelectByDefault="false" />
          <Enumeration Text="Saba" Value="Saba" SelectByDefault="false" />
          <Enumeration Text="Saint Barthélemy" Value="Saint Barthélemy" SelectByDefault="false" />
          <Enumeration Text="Saint Kitts and Nevis" Value="Saint Kitts and Nevis" SelectByDefault="false" />
          <Enumeration Text="Saint Lucia" Value="Saint Lucia" SelectByDefault="false" />
          <Enumeration Text="Saint Martin" Value="Saint Martin" SelectByDefault="false" />
          <Enumeration Text="Saint Pierre and Miquelon" Value="Saint Pierre and Miquelon" SelectByDefault="false" />
          <Enumeration Text="Saint Vincent and the Grenadines" Value="Saint Vincent and the Grenadines" SelectByDefault="false" />
          <Enumeration Text="Samoa" Value="Samoa" SelectByDefault="false" />
          <Enumeration Text="San Marino" Value="San Marino" SelectByDefault="false" />
          <Enumeration Text="São Tomé and Príncipe" Value="São Tomé and Príncipe" SelectByDefault="false" />
          <Enumeration Text="Saudi Arabia" Value="Saudi Arabia" SelectByDefault="false" />
          <Enumeration Text="Senegal" Value="Senegal" SelectByDefault="false" />
          <Enumeration Text="Serbia" Value="Serbia" SelectByDefault="false" />
          <Enumeration Text="Seychelles" Value="Seychelles" SelectByDefault="false" />
          <Enumeration Text="Sierra Leone" Value="Sierra Leone" SelectByDefault="false" />
          <Enumeration Text="Singapore" Value="Singapore" SelectByDefault="false" />
          <Enumeration Text="Sint Eustatius" Value="Sint Eustatius" SelectByDefault="false" />
          <Enumeration Text="Sint Maarten" Value="Sint Maarten" SelectByDefault="false" />
          <Enumeration Text="Slovakia" Value="Slovakia" SelectByDefault="false" />
          <Enumeration Text="Slovenia" Value="Slovenia" SelectByDefault="false" />
          <Enumeration Text="Solomon Islands" Value="Solomon Islands" SelectByDefault="false" />
          <Enumeration Text="Somalia" Value="Somalia" SelectByDefault="false" />
          <Enumeration Text="South Africa" Value="South Africa" SelectByDefault="false" />
          <Enumeration Text="South Georgia and the South Sandwich Islands" Value="South Georgia and the South Sandwich Islands" SelectByDefault="false" />
          <Enumeration Text="South Sudan" Value="South Sudan" SelectByDefault="false" />
          <Enumeration Text="Spain" Value="Spain" SelectByDefault="false" />
          <Enumeration Text="Sri Lanka" Value="Sri Lanka" SelectByDefault="false" />
          <Enumeration Text="St Helena, Ascension, Tristan da Cunha" Value="St Helena, Ascension, Tristan da Cunha" SelectByDefault="false" />
          <Enumeration Text="Sudan" Value="Sudan" SelectByDefault="false" />
          <Enumeration Text="Suriname" Value="Suriname" SelectByDefault="false" />
          <Enumeration Text="Svalbard" Value="Svalbard" SelectByDefault="false" />
          <Enumeration Text="Swaziland" Value="Swaziland" SelectByDefault="false" />
          <Enumeration Text="Sweden" Value="Sweden" SelectByDefault="false" />
          <Enumeration Text="Switzerland" Value="Switzerland" SelectByDefault="false" />
          <Enumeration Text="Syria" Value="Syria" SelectByDefault="false" />
          <Enumeration Text="Taiwan" Value="Taiwan" SelectByDefault="false" />
          <Enumeration Text="Tajikistan" Value="Tajikistan" SelectByDefault="false" />
          <Enumeration Text="Tanzania" Value="Tanzania" SelectByDefault="false" />
          <Enumeration Text="Thailand" Value="Thailand" SelectByDefault="false" />
          <Enumeration Text="Timor-Leste" Value="Timor-Leste" SelectByDefault="false" />
          <Enumeration Text="Togo" Value="Togo" SelectByDefault="false" />
          <Enumeration Text="Tokelau" Value="Tokelau" SelectByDefault="false" />
          <Enumeration Text="Tonga" Value="Tonga" SelectByDefault="false" />
          <Enumeration Text="Trinidad and Tobago" Value="Trinidad and Tobago" SelectByDefault="false" />
          <Enumeration Text="Tunisia" Value="Tunisia" SelectByDefault="false" />
          <Enumeration Text="Turkey" Value="Turkey" SelectByDefault="false" />
          <Enumeration Text="Turkmenistan" Value="Turkmenistan" SelectByDefault="false" />
          <Enumeration Text="Turks and Caicos Islands" Value="Turks and Caicos Islands" SelectByDefault="false" />
          <Enumeration Text="Tuvalu" Value="Tuvalu" SelectByDefault="false" />
          <Enumeration Text="U.S. Outlying Islands" Value="U.S. Outlying Islands" SelectByDefault="false" />
          <Enumeration Text="U.S. Virgin Islands" Value="U.S. Virgin Islands" SelectByDefault="false" />
          <Enumeration Text="Uganda" Value="Uganda" SelectByDefault="false" />
          <Enumeration Text="Ukraine" Value="Ukraine" SelectByDefault="false" />
          <Enumeration Text="United Arab Emirates" Value="United Arab Emirates" SelectByDefault="false" />
          <Enumeration Text="United Kingdom" Value="United Kingdom" SelectByDefault="false" />
          <Enumeration Text="United States" Value="United States" SelectByDefault="true" />
          <Enumeration Text="Uruguay" Value="Uruguay" SelectByDefault="false" />
          <Enumeration Text="Uzbekistan" Value="Uzbekistan" SelectByDefault="false" />
          <Enumeration Text="Vanuatu" Value="Vanuatu" SelectByDefault="false" />
          <Enumeration Text="Vatican City" Value="Vatican City" SelectByDefault="false" />
          <Enumeration Text="Venezuela" Value="Venezuela" SelectByDefault="false" />
          <Enumeration Text="Vietnam" Value="Vietnam" SelectByDefault="false" />
          <Enumeration Text="Wallis and Futuna" Value="Wallis and Futuna" SelectByDefault="false" />
          <Enumeration Text="Yemen" Value="Yemen" SelectByDefault="false" />
          <Enumeration Text="Zambia" Value="Zambia" SelectByDefault="false" />
          <Enumeration Text="Zimbabwe" Value="Zimbabwe" SelectByDefault="false" />
        </Restriction>
      </ClaimType>

      <ClaimType Id="extension_InterestList">
        <DisplayName>Which of the following best represents what you're interested in?</DisplayName>
        <DataType>string</DataType>
        <UserHelpText>Intereset List.</UserHelpText>
        <UserInputType>DropdownSingleSelect</UserInputType>
        <Restriction>
          <Enumeration Text="Completions" Value="Completions" SelectByDefault="true" />
          <Enumeration Text="Drilling" Value="Drilling" SelectByDefault="false" />
          <Enumeration Text="Intervention" Value="Intervention" SelectByDefault="false" />
          <Enumeration Text="Midstream" Value="Midstream" SelectByDefault="false" />
          <Enumeration Text="Production" Value="Production" SelectByDefault="false" />
          <Enumeration Text="Subsurface" Value="Subsurface" SelectByDefault="false" />
        </Restriction>
      </ClaimType>

      <ClaimType Id="extension_Terms">
        <DisplayName></DisplayName>
        <DataType>string</DataType>
        <UserInputType>CheckboxMultiSelect</UserInputType>
         <Restriction>
          <Enumeration Text="I have read and agree to the Terms and Conditions and Privacy Policy" Value="Terms" SelectByDefault="false" />
        </Restriction>
      </ClaimType>

    </ClaimsSchema>

    <ClaimsTransformations>
      <ClaimsTransformation Id="CreateOtherMailsFromEmail" TransformationMethod="AddItemToStringCollection">
        <InputClaims>
          <InputClaim ClaimTypeReferenceId="email" TransformationClaimType="item" />
          <InputClaim ClaimTypeReferenceId="otherMails" TransformationClaimType="collection" />
        </InputClaims>
        <OutputClaims>
          <OutputClaim ClaimTypeReferenceId="otherMails" TransformationClaimType="collection" />
        </OutputClaims>
      </ClaimsTransformation>
 
      <ClaimsTransformation Id="AssertAccountEnabledIsTrue" TransformationMethod="AssertBooleanClaimIsEqualToValue">
        <InputClaims>
          <InputClaim ClaimTypeReferenceId="accountEnabled" TransformationClaimType="inputClaim" />
        </InputClaims>
        <InputParameters>
          <InputParameter Id="valueToCompareTo" DataType="boolean" Value="true" />
        </InputParameters>
      </ClaimsTransformation>

      <!-- Start -> Concat first name, last name to display name -->
      <ClaimsTransformation Id="CreateDisplayNameFromFirstNameAndLastName" TransformationMethod="FormatStringMultipleClaims">
        <InputClaims>
          <InputClaim ClaimTypeReferenceId="givenName" TransformationClaimType="inputClaim1" />
          <InputClaim ClaimTypeReferenceId="surname" TransformationClaimType="inputClaim2" />
        </InputClaims>
        <InputParameters>
          <InputParameter Id="stringFormat" DataType="string" Value="{0} {1}" />
        </InputParameters>
        <OutputClaims>
          <OutputClaim ClaimTypeReferenceId="displayName" TransformationClaimType="outputClaim" />
        </OutputClaims>
      </ClaimsTransformation >
      <!-- End -> Concat first name, last name to display name -->

    </ClaimsTransformations>

    <ClientDefinitions>
      <ClientDefinition Id="DefaultWeb">
        <ClientUIFilterFlags>LineMarkers, MetaRefresh</ClientUIFilterFlags>
      </ClientDefinition>
    </ClientDefinitions>

    <ContentDefinitions>

      <!-- This content definition is to render an error page that displays unhandled errors. -->
      <ContentDefinition Id="api.error">
        <LoadUri>~/tenant/templates/AzureBlue/exception.cshtml</LoadUri>
        <RecoveryUri>~/common/default_page_error.html</RecoveryUri>
        <!-- <DataUri>urn:com:microsoft:aad:b2c:elements:globalexception:1.1.0</DataUri> -->
           <DataUri>urn:com:microsoft:aad:b2c:elements:contract:globalexception:1.2.0</DataUri>
        <Metadata>
          <Item Key="DisplayName">Error page</Item>
        </Metadata>
      </ContentDefinition>

      <ContentDefinition Id="api.idpselections">
        <LoadUri>~/tenant/templates/AzureBlue/idpSelector.cshtml</LoadUri>
        <RecoveryUri>~/common/default_page_error.html</RecoveryUri>
        <!-- <DataUri>urn:com:microsoft:aad:b2c:elements:idpselection:1.0.0</DataUri> -->
          <DataUri>urn:com:microsoft:aad:b2c:elements:contract:providerselection:1.2.0</DataUri>
        <Metadata>
          <Item Key="DisplayName">Idp selection page</Item>
          <Item Key="language.intro">Sign in</Item>
        </Metadata>
      </ContentDefinition>

      <ContentDefinition Id="api.idpselections.signup">
        <LoadUri>~/tenant/templates/AzureBlue/idpSelector.cshtml</LoadUri>
        <RecoveryUri>~/common/default_page_error.html</RecoveryUri>
        <!-- <DataUri>urn:com:microsoft:aad:b2c:elements:idpselection:1.0.0</DataUri> -->
          <DataUri>urn:com:microsoft:aad:b2c:elements:contract:providerselection:1.2.0</DataUri>
        <Metadata>
          <Item Key="DisplayName">Idp selection page</Item>
          <Item Key="language.intro">Sign up</Item>
        </Metadata>
      </ContentDefinition>

      <ContentDefinition Id="api.signuporsignin">
        <LoadUri>~/tenant/templates/AzureBlue/unified.cshtml</LoadUri>
        <RecoveryUri>~/common/default_page_error.html</RecoveryUri>
        <!-- <DataUri>urn:com:microsoft:aad:b2c:elements:unifiedssp:1.0.0</DataUri> -->
          <DataUri>urn:com:microsoft:aad:b2c:elements:contract:unifiedssp:1.2.0</DataUri>
        <Metadata>
          <Item Key="DisplayName">Signin and Signup</Item>
        </Metadata>
      </ContentDefinition>

      <ContentDefinition Id="api.selfasserted">
        <LoadUri>~/tenant/templates/AzureBlue/selfAsserted.cshtml</LoadUri>
        <RecoveryUri>~/common/default_page_error.html</RecoveryUri>
        <!-- <DataUri>urn:com:microsoft:aad:b2c:elements:selfasserted:1.1.0</DataUri> -->
          <DataUri>urn:com:microsoft:aad:b2c:elements:contract:selfasserted:1.2.0</DataUri>
        <Metadata>
          <Item Key="DisplayName">Collect information from user page</Item>
        </Metadata>
      </ContentDefinition>

      <ContentDefinition Id="api.selfasserted.profileupdate">
        <LoadUri>~/tenant/templates/AzureBlue/selfAsserted.cshtml</LoadUri>
        <RecoveryUri>~/common/default_page_error.html</RecoveryUri>
        <!-- <DataUri>urn:com:microsoft:aad:b2c:elements:selfasserted:1.1.0</DataUri> -->
          <DataUri>urn:com:microsoft:aad:b2c:elements:contract:selfasserted:1.2.0</DataUri>
        <Metadata>
          <Item Key="DisplayName">Collect information from user page</Item>
        </Metadata>
      </ContentDefinition>

      <ContentDefinition Id="api.localaccountsignup">
        <!-- <LoadUri>~/tenant/templates/AzureBlue/selfAsserted.cshtml</LoadUri> -->
        <LoadUri>https://delfib2cstorage.blob.core.windows.net/b2c/index.cshtml</LoadUri>
        <RecoveryUri>~/common/default_page_error.html</RecoveryUri>
        <!-- <DataUri>urn:com:microsoft:aad:b2c:elements:selfasserted:1.1.0</DataUri> -->
          <DataUri>urn:com:microsoft:aad:b2c:elements:contract:selfasserted:1.2.0</DataUri>
        <Metadata>
          <Item Key="DisplayName">Local account sign up page</Item>
        </Metadata>
      </ContentDefinition>

      <ContentDefinition Id="api.localaccountpasswordreset">
        <LoadUri>~/tenant/templates/AzureBlue/selfAsserted.cshtml</LoadUri>
        <RecoveryUri>~/common/default_page_error.html</RecoveryUri>
        <!-- <DataUri>urn:com:microsoft:aad:b2c:elements:selfasserted:1.1.0</DataUri> -->
          <DataUri>urn:com:microsoft:aad:b2c:elements:contract:selfasserted:1.2.0</DataUri>
        <Metadata>
          <Item Key="DisplayName">Local account change password page</Item>
        </Metadata>
      </ContentDefinition>

    </ContentDefinitions>
  </BuildingBlocks>

  <!--
        A list of all the claim providers that can be used in the technical policies. If a claims provider is not listed 
        in this section, then it cannot be used in a technical policy.
    -->
  <ClaimsProviders>
 
    <ClaimsProvider>
      <DisplayName>Local Account SignIn</DisplayName>
      <TechnicalProfiles>
        <TechnicalProfile Id="login-NonInteractive">
          <DisplayName>Local Account SignIn</DisplayName>
          <Protocol Name="OpenIdConnect" />
          <Metadata>
            <Item Key="UserMessageIfClaimsPrincipalDoesNotExist">We can't seem to find your account</Item>
            <Item Key="UserMessageIfInvalidPassword">Your password is incorrect</Item>
            <Item Key="UserMessageIfOldPasswordUsed">Looks like you used an old password</Item>

            <Item Key="ProviderName">https://sts.windows.net/</Item>
            <Item Key="METADATA">https://login.microsoftonline.com/{tenant}/.well-known/openid-configuration</Item>
            <Item Key="authorization_endpoint">https://login.microsoftonline.com/{tenant}/oauth2/token</Item>
            <Item Key="response_types">id_token</Item>
            <Item Key="response_mode">query</Item>
            <Item Key="scope">email openid</Item>
            <Item Key="grant_type">password</Item>

            <!-- Policy Engine Clients -->
            <Item Key="UsePolicyInRedirectUri">false</Item>
            <Item Key="HttpBinding">POST</Item>
          </Metadata>
          <InputClaims>
            <InputClaim ClaimTypeReferenceId="signInName" PartnerClaimType="username" Required="true" />
            <InputClaim ClaimTypeReferenceId="password" Required="true" />
            <InputClaim ClaimTypeReferenceId="grant_type" DefaultValue="password" />
            <InputClaim ClaimTypeReferenceId="scope" DefaultValue="openid" />
            <InputClaim ClaimTypeReferenceId="nca" PartnerClaimType="nca" DefaultValue="1" />
          </InputClaims>
          <OutputClaims>
            <OutputClaim ClaimTypeReferenceId="objectId" PartnerClaimType="oid" />
            <OutputClaim ClaimTypeReferenceId="tenantId" PartnerClaimType="tid" />
            <OutputClaim ClaimTypeReferenceId="givenName" PartnerClaimType="given_name" />
            <OutputClaim ClaimTypeReferenceId="surName" PartnerClaimType="family_name" />
            <OutputClaim ClaimTypeReferenceId="displayName" PartnerClaimType="name" />
            <OutputClaim ClaimTypeReferenceId="userPrincipalName" PartnerClaimType="upn" />
            <OutputClaim ClaimTypeReferenceId="authenticationSource" DefaultValue="localAccountAuthentication" />
          </OutputClaims>
        </TechnicalProfile>
      </TechnicalProfiles>
    </ClaimsProvider>
 
    <ClaimsProvider>
      <DisplayName>Azure Active Directory</DisplayName>
      <TechnicalProfiles>

        <TechnicalProfile Id="AAD-Common">
          <DisplayName>Azure Active Directory</DisplayName>
          <Protocol Name="Proprietary" Handler="Web.TPEngine.Providers.AzureActiveDirectoryProvider, Web.TPEngine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" />

          <CryptographicKeys>
            <Key Id="issuer_secret" StorageReferenceId="B2C_1A_TokenSigningKeyContainer" />
          </CryptographicKeys>

          <!-- We need this here to suppress the SelfAsserted provider from invoking SSO on validation profiles. -->
          <IncludeInSso>false</IncludeInSso>
          <UseTechnicalProfileForSessionManagement ReferenceId="SM-Noop" />
        </TechnicalProfile>
     
        <!-- Technical profiles for local accounts -->

        <TechnicalProfile Id="AAD-UserWriteUsingLogonEmail">
          <Metadata>
            <Item Key="Operation">Write</Item>
            <Item Key="RaiseErrorIfClaimsPrincipalAlreadyExists">true</Item>

            <Item Key="ClientId">4b4540d0-8a23-40c5-bf0b-d2f3c10eb13f</Item>
            <Item Key="ApplicationObjectId">3e9b9d49-9be1-4073-874f-401a6bfb343f</Item>

          </Metadata>
          <IncludeInSso>false</IncludeInSso>
          <!-- Concat display name with firstname, lastname -->
           <InputClaimsTransformations>
            <InputClaimsTransformation ReferenceId="CreateDisplayNameFromFirstNameAndLastName" />
          </InputClaimsTransformations>
          <!-- END - Concat display name with firstname, lastname -->
          <InputClaims>
            <InputClaim ClaimTypeReferenceId="email" PartnerClaimType="signInNames.emailAddress" Required="true" />
          </InputClaims>
          <PersistedClaims>
            <!-- Required claims -->
            <PersistedClaim ClaimTypeReferenceId="email" PartnerClaimType="signInNames.emailAddress" />
            <PersistedClaim ClaimTypeReferenceId="newPassword" PartnerClaimType="password"/>
            <PersistedClaim ClaimTypeReferenceId="displayName" />
            <PersistedClaim ClaimTypeReferenceId="passwordPolicies" DefaultValue="DisablePasswordExpiration" />
  
            <!-- Optional claims. -->
            <PersistedClaim ClaimTypeReferenceId="givenName" />
            <PersistedClaim ClaimTypeReferenceId="surname" />

            <PersistedClaim ClaimTypeReferenceId="extension_CompanyName" />
            <PersistedClaim ClaimTypeReferenceId="extension_Phonenumber" />
            <PersistedClaim ClaimTypeReferenceId="country" />
            <PersistedClaim ClaimTypeReferenceId="extension_InterestList" />
            <PersistedClaim ClaimTypeReferenceId="extension_Terms" />
          </PersistedClaims>
          <OutputClaims>
            <OutputClaim ClaimTypeReferenceId="objectId" />
            <OutputClaim ClaimTypeReferenceId="newUser" PartnerClaimType="newClaimsPrincipalCreated" />
            <OutputClaim ClaimTypeReferenceId="authenticationSource" DefaultValue="localAccountAuthentication" />
            <OutputClaim ClaimTypeReferenceId="userPrincipalName" />
            <OutputClaim ClaimTypeReferenceId="signInNames.emailAddress" />
          </OutputClaims>
          <IncludeTechnicalProfile ReferenceId="AAD-Common" />
          <UseTechnicalProfileForSessionManagement ReferenceId="SM-AAD" />
        </TechnicalProfile>

        <TechnicalProfile Id="AAD-UserReadUsingEmailAddress">
          <Metadata>
            <Item Key="Operation">Read</Item>
            <Item Key="RaiseErrorIfClaimsPrincipalDoesNotExist">true</Item>
            <Item Key="UserMessageIfClaimsPrincipalDoesNotExist">An account could not be found for the provided user ID.</Item>
          </Metadata>
          <IncludeInSso>false</IncludeInSso>
          <InputClaims>
            <InputClaim ClaimTypeReferenceId="email" PartnerClaimType="signInNames.emailAddress" Required="true" />
          </InputClaims>
          <OutputClaims>
            <!-- Required claims -->
            <OutputClaim ClaimTypeReferenceId="objectId" />
            <OutputClaim ClaimTypeReferenceId="authenticationSource" DefaultValue="localAccountAuthentication" />
  
            <!-- Optional claims -->
            <OutputClaim ClaimTypeReferenceId="userPrincipalName" />
            <OutputClaim ClaimTypeReferenceId="displayName" />
            <OutputClaim ClaimTypeReferenceId="accountEnabled" />
            <OutputClaim ClaimTypeReferenceId="otherMails" />
            <OutputClaim ClaimTypeReferenceId="signInNames.emailAddress" />
          </OutputClaims>
          <OutputClaimsTransformations>
            <OutputClaimsTransformation ReferenceId="AssertAccountEnabledIsTrue" />
          </OutputClaimsTransformations>
          <IncludeTechnicalProfile ReferenceId="AAD-Common" />
        </TechnicalProfile>

        <TechnicalProfile Id="AAD-UserWritePasswordUsingObjectId">
          <Metadata>
            <Item Key="Operation">Write</Item>
            <Item Key="RaiseErrorIfClaimsPrincipalDoesNotExist">true</Item>
          </Metadata>
          <IncludeInSso>false</IncludeInSso>
          <InputClaims>
            <InputClaim ClaimTypeReferenceId="objectId" Required="true" />
          </InputClaims>
          <PersistedClaims>
            <PersistedClaim ClaimTypeReferenceId="objectId" />
            <PersistedClaim ClaimTypeReferenceId="newPassword" PartnerClaimType="password"/>
  
          </PersistedClaims>
          <IncludeTechnicalProfile ReferenceId="AAD-Common" />
        </TechnicalProfile>

        <!-- Technical profiles for updating user record using objectId -->

        <TechnicalProfile Id="AAD-UserWriteProfileUsingObjectId">
          <Metadata>
            <Item Key="Operation">Write</Item>
            <Item Key="RaiseErrorIfClaimsPrincipalAlreadyExists">false</Item>
            <Item Key="RaiseErrorIfClaimsPrincipalDoesNotExist">true</Item>
          </Metadata>
          <IncludeInSso>false</IncludeInSso>
          <!-- DisplayName to be concat-->
          <InputClaimsTransformations>
            <InputClaimsTransformation ReferenceId="CreateDisplayNameFromFirstNameAndLastName" />
          </InputClaimsTransformations>
          <!-- END- DisplayName to be concat-->
          <InputClaims>
            <InputClaim ClaimTypeReferenceId="objectId" Required="true" />
          </InputClaims>
          <PersistedClaims>
            <!-- Required claims -->
            <PersistedClaim ClaimTypeReferenceId="objectId" />

            <!-- Optional claims -->
            <PersistedClaim ClaimTypeReferenceId="givenName" />
            <PersistedClaim ClaimTypeReferenceId="surname" />
            <PersistedClaim ClaimTypeReferenceId="displayName" />
            
            <PersistedClaim ClaimTypeReferenceId="extension_CompanyName" />
            <PersistedClaim ClaimTypeReferenceId="extension_Phonenumber" />
            <PersistedClaim ClaimTypeReferenceId="country" />
            <PersistedClaim ClaimTypeReferenceId="extension_InterestList" />
            <PersistedClaim ClaimTypeReferenceId="extension_Terms" />
            <PersistedClaim ClaimTypeReferenceId="extension_Phonenumber" />
          </PersistedClaims>
          <IncludeTechnicalProfile ReferenceId="AAD-Common" />
        </TechnicalProfile>

        <!-- The following technical profile is used to read data after user authenticates. -->
        <TechnicalProfile Id="AAD-UserReadUsingObjectId">
          <Metadata>
            <Item Key="Operation">Read</Item>
            <Item Key="RaiseErrorIfClaimsPrincipalDoesNotExist">true</Item>
          </Metadata>
          <IncludeInSso>false</IncludeInSso>
          <InputClaims>
            <InputClaim ClaimTypeReferenceId="objectId" Required="true" />
          </InputClaims>
          <OutputClaims>

            <!-- Optional claims -->
            <OutputClaim ClaimTypeReferenceId="signInNames.emailAddress" />
            <OutputClaim ClaimTypeReferenceId="displayName" />
            <OutputClaim ClaimTypeReferenceId="otherMails" />
            <OutputClaim ClaimTypeReferenceId="givenName" />
            <OutputClaim ClaimTypeReferenceId="surname" />

            <!-- <OutputClaim ClaimTypeReferenceId="extension_CompanyName" />
            <OutputClaim ClaimTypeReferenceId="extension_Phonenumber" />
            <OutputClaim ClaimTypeReferenceId="country" />
            <OutputClaim ClaimTypeReferenceId="extension_InterestList" /> -->
          </OutputClaims>
          <IncludeTechnicalProfile ReferenceId="AAD-Common" />
        </TechnicalProfile>

      </TechnicalProfiles>
    </ClaimsProvider>

    <ClaimsProvider>
      <DisplayName>Self Asserted</DisplayName>
      <TechnicalProfiles>

        <TechnicalProfile Id="SelfAsserted-ProfileUpdate">
          <DisplayName>User ID signup</DisplayName>
          <Protocol Name="Proprietary" Handler="Web.TPEngine.Providers.SelfAssertedAttributeProvider, Web.TPEngine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" />
          <Metadata>
            <Item Key="ContentDefinitionReferenceId">api.selfasserted.profileupdate</Item>
          </Metadata>
          <IncludeInSso>false</IncludeInSso>
          <InputClaims>

            <InputClaim ClaimTypeReferenceId="userPrincipalName" />

            <!-- Optional claims. These claims are collected from the user and can be modified. Any claim added here should be updated in the
                 ValidationTechnicalProfile referenced below so it can be written to directory after being updateed by the user, i.e. AAD-UserWriteProfileUsingObjectId. -->
            <InputClaim ClaimTypeReferenceId="givenName" />
            <InputClaim ClaimTypeReferenceId="surname" />
<!-- 
            <InputClaim ClaimTypeReferenceId="extension_CompanyName" />
            <InputClaim ClaimTypeReferenceId="extension_Phonenumber" />
            <InputClaim ClaimTypeReferenceId="country" />
            <InputClaim ClaimTypeReferenceId="extension_InterestList" /> -->
            
          </InputClaims>
          <OutputClaims>
            <!-- Required claims -->
            <OutputClaim ClaimTypeReferenceId="executed-SelfAsserted-Input" DefaultValue="true" />

            <!-- Optional claims. These claims are collected from the user and can be modified. Any claim added here should be updated in the
                 ValidationTechnicalProfile referenced below so it can be written to directory after being updateed by the user, i.e. AAD-UserWriteProfileUsingObjectId. -->
            <OutputClaim ClaimTypeReferenceId="givenName" />
            <OutputClaim ClaimTypeReferenceId="surname" />

            <!-- <OutputClaim ClaimTypeReferenceId="extension_CompanyName" />
            <OutputClaim ClaimTypeReferenceId="extension_Phonenumber" />
            <OutputClaim ClaimTypeReferenceId="country" />
            <OutputClaim ClaimTypeReferenceId="extension_InterestList" /> -->

          </OutputClaims>
          <ValidationTechnicalProfiles>
            <ValidationTechnicalProfile ReferenceId="AAD-UserWriteProfileUsingObjectId" />
          </ValidationTechnicalProfiles>
        </TechnicalProfile>
      </TechnicalProfiles>
    </ClaimsProvider>

    <ClaimsProvider>
      <DisplayName>Local Account</DisplayName>
      <TechnicalProfiles>

        <TechnicalProfile Id="LocalAccountSignUpWithLogonEmail">
          <DisplayName>Email signup</DisplayName>
          <Protocol Name="Proprietary" Handler="Web.TPEngine.Providers.SelfAssertedAttributeProvider, Web.TPEngine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" />
          <Metadata>
            <Item Key="IpAddressClaimReferenceId">IpAddress</Item>
            <Item Key="ContentDefinitionReferenceId">api.localaccountsignup</Item>
            <Item Key="language.button_continue">Create</Item>
          </Metadata>
          <CryptographicKeys>
            <Key Id="issuer_secret" StorageReferenceId="B2C_1A_TokenSigningKeyContainer" />
          </CryptographicKeys>
          <InputClaims>
            <InputClaim ClaimTypeReferenceId="email" />
          </InputClaims>
          <OutputClaims>
            <OutputClaim ClaimTypeReferenceId="objectId" />
            <OutputClaim ClaimTypeReferenceId="email" PartnerClaimType="Verified.Email" Required="true" />
            <OutputClaim ClaimTypeReferenceId="newPassword" Required="true" />
            <OutputClaim ClaimTypeReferenceId="reenterPassword" Required="true" />
            <OutputClaim ClaimTypeReferenceId="executed-SelfAsserted-Input" DefaultValue="true" />
            <OutputClaim ClaimTypeReferenceId="authenticationSource" />
            <OutputClaim ClaimTypeReferenceId="newUser" />

            <!-- Optional claims, to be collected from the user -->
            <OutputClaim ClaimTypeReferenceId="displayName" />
            <OutputClaim ClaimTypeReferenceId="givenName" />
            <OutputClaim ClaimTypeReferenceId="surName" />
            
            <!-- <OutputClaim ClaimTypeReferenceId="extension_CompanyName" />
            <OutputClaim ClaimTypeReferenceId="extension_Phonenumber" />
            <OutputClaim ClaimTypeReferenceId="country" />
            <OutputClaim ClaimTypeReferenceId="extension_InterestList" /> -->

          </OutputClaims>
          <ValidationTechnicalProfiles>
            <ValidationTechnicalProfile ReferenceId="AAD-UserWriteUsingLogonEmail" />
          </ValidationTechnicalProfiles>
          <UseTechnicalProfileForSessionManagement ReferenceId="SM-AAD" />
        </TechnicalProfile>

        <!-- This technical profile uses a validation technical profile to authenticate the user. -->
        <TechnicalProfile Id="SelfAsserted-LocalAccountSignin-Email">
          <DisplayName>Local Account Signin</DisplayName>
          <Protocol Name="Proprietary" Handler="Web.TPEngine.Providers.SelfAssertedAttributeProvider, Web.TPEngine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" />
          <Metadata>
            <Item Key="SignUpTarget">SignUpWithLogonEmailExchange</Item>
            <Item Key="setting.operatingMode">Email</Item>
            <Item Key="ContentDefinitionReferenceId">api.selfasserted</Item>
          </Metadata>
          <IncludeInSso>false</IncludeInSso>
          <InputClaims>
            <InputClaim ClaimTypeReferenceId="signInName" />
          </InputClaims>
          <OutputClaims>
            <OutputClaim ClaimTypeReferenceId="signInName" Required="true" />
            <OutputClaim ClaimTypeReferenceId="password" Required="true" />
            <OutputClaim ClaimTypeReferenceId="objectId" />
            <OutputClaim ClaimTypeReferenceId="authenticationSource" />
          </OutputClaims>
          <ValidationTechnicalProfiles>
            <ValidationTechnicalProfile ReferenceId="login-NonInteractive" />
          </ValidationTechnicalProfiles>
          <UseTechnicalProfileForSessionManagement ReferenceId="SM-AAD" />
        </TechnicalProfile>

        <!-- This technical profile forces the user to verify the email address that they provide on the UI. Only after email is verified, the user account is
        read from the directory. -->
        <TechnicalProfile Id="LocalAccountDiscoveryUsingEmailAddress">
          <DisplayName>Reset password using email address</DisplayName>
          <Protocol Name="Proprietary" Handler="Web.TPEngine.Providers.SelfAssertedAttributeProvider, Web.TPEngine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" />
          <Metadata>
            <Item Key="IpAddressClaimReferenceId">IpAddress</Item>
            <Item Key="ContentDefinitionReferenceId">api.localaccountpasswordreset</Item>
            <Item Key="UserMessageIfClaimsTransformationBooleanValueIsNotEqual">Your account has been locked. Contact your support person to unlock it, then try again.</Item>
          </Metadata>
          <CryptographicKeys>
            <Key Id="issuer_secret" StorageReferenceId="B2C_1A_TokenSigningKeyContainer" />
          </CryptographicKeys>
          <IncludeInSso>false</IncludeInSso>
          <OutputClaims>
            <OutputClaim ClaimTypeReferenceId="email" PartnerClaimType="Verified.Email" Required="true" />
            <OutputClaim ClaimTypeReferenceId="objectId" />
            <OutputClaim ClaimTypeReferenceId="userPrincipalName" />
            <OutputClaim ClaimTypeReferenceId="authenticationSource" />
  
          </OutputClaims>
          <ValidationTechnicalProfiles>
            <ValidationTechnicalProfile ReferenceId="AAD-UserReadUsingEmailAddress" />
          </ValidationTechnicalProfiles>
        </TechnicalProfile>

        <TechnicalProfile Id="LocalAccountWritePasswordUsingObjectId">
          <DisplayName>Change password (username)</DisplayName>
          <Protocol Name="Proprietary" Handler="Web.TPEngine.Providers.SelfAssertedAttributeProvider, Web.TPEngine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" />
          <Metadata>
            <Item Key="ContentDefinitionReferenceId">api.localaccountpasswordreset</Item>
          </Metadata>
          <CryptographicKeys>
            <Key Id="issuer_secret" StorageReferenceId="B2C_1A_TokenSigningKeyContainer" />
          </CryptographicKeys>
          <InputClaims>
            <InputClaim ClaimTypeReferenceId="objectId" />
  
          </InputClaims>
          <OutputClaims>
            <OutputClaim ClaimTypeReferenceId="newPassword" Required="true" />
            <OutputClaim ClaimTypeReferenceId="reenterPassword" Required="true" />
          </OutputClaims>
          <ValidationTechnicalProfiles>
            <ValidationTechnicalProfile ReferenceId="AAD-UserWritePasswordUsingObjectId" />
          </ValidationTechnicalProfiles>
        </TechnicalProfile>

      </TechnicalProfiles>
    </ClaimsProvider>

    <ClaimsProvider>
      <DisplayName>Session Management</DisplayName>
      <TechnicalProfiles>
        <TechnicalProfile Id="SM-Noop">
          <DisplayName>Noop Session Management Provider</DisplayName>
          <Protocol Name="Proprietary" Handler="Web.TPEngine.SSO.NoopSSOSessionProvider, Web.TPEngine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" />
        </TechnicalProfile>

        <TechnicalProfile Id="SM-AAD">
          <DisplayName>Session Mananagement Provider</DisplayName>
          <Protocol Name="Proprietary" Handler="Web.TPEngine.SSO.DefaultSSOSessionProvider, Web.TPEngine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" />
          <PersistedClaims>
            <PersistedClaim ClaimTypeReferenceId="objectId" />
            <PersistedClaim ClaimTypeReferenceId="signInName" />
            <PersistedClaim ClaimTypeReferenceId="authenticationSource" />
            <PersistedClaim ClaimTypeReferenceId="identityProvider" />
            <PersistedClaim ClaimTypeReferenceId="newUser" />
            <PersistedClaim ClaimTypeReferenceId="executed-SelfAsserted-Input" />
          </PersistedClaims>
          <OutputClaims>
            <OutputClaim ClaimTypeReferenceId="objectIdFromSession" DefaultValue="true"/>
          </OutputClaims>
        </TechnicalProfile>
 
      </TechnicalProfiles>
    </ClaimsProvider>

    <ClaimsProvider>
      <DisplayName>Trustframework Policy Engine TechnicalProfiles</DisplayName>
      <TechnicalProfiles>
        <TechnicalProfile Id="TpEngine_c3bd4fe2-1775-4013-b91d-35f16d377d13">
          <DisplayName>Trustframework Policy Engine Default Technical Profile</DisplayName>
          <Protocol Name="None" />
          <Metadata>
            <Item Key="url">{service:te}</Item>
          </Metadata>
        </TechnicalProfile>
      </TechnicalProfiles>
    </ClaimsProvider>

    <ClaimsProvider>
      <DisplayName>Token Issuer</DisplayName>
      <TechnicalProfiles>
        <TechnicalProfile Id="JwtIssuer">
          <DisplayName>JWT Issuer</DisplayName>
          <Protocol Name="None" />
          <OutputTokenFormat>JWT</OutputTokenFormat>
          <Metadata>
            <Item Key="client_id">{service:te}</Item>
            <Item Key="issuer_refresh_token_user_identity_claim_type">objectId</Item>
            <Item Key="SendTokenResponseBodyWithJsonNumbers">true</Item>
          </Metadata>
          <CryptographicKeys>
            <Key Id="issuer_secret" StorageReferenceId="B2C_1A_TokenSigningKeyContainer" />
            <Key Id="issuer_refresh_token_key" StorageReferenceId="B2C_1A_TokenEncryptionKeyContainer" />
          </CryptographicKeys>
          <InputClaims />
          <OutputClaims />
        </TechnicalProfile>
      </TechnicalProfiles>
    </ClaimsProvider>
  </ClaimsProviders>

  <UserJourneys>

    <UserJourney Id="SignUpOrSignIn">
      <OrchestrationSteps>
   
        <!-- <OrchestrationStep Order="1" Type="CombinedSignInAndSignUp" ContentDefinitionReferenceId="api.signuporsignin">
          <ClaimsProviderSelections>
            <ClaimsProviderSelection ValidationClaimsExchangeId="LocalAccountSigninEmailExchange" />
          </ClaimsProviderSelections>
          <ClaimsExchanges>
            <ClaimsExchange Id="LocalAccountSigninEmailExchange" TechnicalProfileReferenceId="SelfAsserted-LocalAccountSignin-Email" />
          </ClaimsExchanges>
        </OrchestrationStep> -->

        <OrchestrationStep Order="1" Type="ClaimsExchange">
          <Preconditions>
            <Precondition Type="ClaimsExist" ExecuteActionsIf="true">
              <Value>objectId</Value>
              <Action>SkipThisOrchestrationStep</Action>
            </Precondition>
          </Preconditions>
          <ClaimsExchanges>
            <ClaimsExchange Id="SignUpWithLogonEmailExchange" TechnicalProfileReferenceId="LocalAccountSignUpWithLogonEmail" />
          </ClaimsExchanges>
        </OrchestrationStep>

        <!-- This step reads any user attributes that we may not have received when in the token. -->
        <OrchestrationStep Order="2" Type="ClaimsExchange">
          <ClaimsExchanges>
            <ClaimsExchange Id="AADUserReadWithObjectId" TechnicalProfileReferenceId="AAD-UserReadUsingObjectId" />
          </ClaimsExchanges>
        </OrchestrationStep>
 
        <OrchestrationStep Order="3" Type="SendClaims" CpimIssuerTechnicalProfileReferenceId="JwtIssuer" />
    
      </OrchestrationSteps>
      <ClientDefinition ReferenceId="DefaultWeb" />
    </UserJourney>

    <UserJourney Id="ProfileEdit">
      <OrchestrationSteps>
   
        <OrchestrationStep Order="1" Type="ClaimsProviderSelection" ContentDefinitionReferenceId="api.idpselections">
          <ClaimsProviderSelections>
            <ClaimsProviderSelection TargetClaimsExchangeId="LocalAccountSigninEmailExchange" />
          </ClaimsProviderSelections>
        </OrchestrationStep>
        <OrchestrationStep Order="2" Type="ClaimsExchange">
          <ClaimsExchanges>
            <ClaimsExchange Id="LocalAccountSigninEmailExchange" TechnicalProfileReferenceId="SelfAsserted-LocalAccountSignin-Email" />
          </ClaimsExchanges>
        </OrchestrationStep>
        <OrchestrationStep Order="3" Type="ClaimsExchange">
          <ClaimsExchanges>
            <ClaimsExchange Id="AADUserReadWithObjectId" TechnicalProfileReferenceId="AAD-UserReadUsingObjectId" />
          </ClaimsExchanges>
        </OrchestrationStep>
 
        <OrchestrationStep Order="4" Type="ClaimsExchange">
          <ClaimsExchanges>
            <ClaimsExchange Id="B2CUserProfileUpdateExchange" TechnicalProfileReferenceId="SelfAsserted-ProfileUpdate" />
          </ClaimsExchanges>
        </OrchestrationStep>
        <OrchestrationStep Order="5" Type="SendClaims" CpimIssuerTechnicalProfileReferenceId="JwtIssuer" />
    
      </OrchestrationSteps>
      <ClientDefinition ReferenceId="DefaultWeb" />
    </UserJourney>

    <UserJourney Id="PasswordReset">
      <OrchestrationSteps>
        <OrchestrationStep Order="1" Type="ClaimsExchange">
          <ClaimsExchanges>
            <ClaimsExchange Id="PasswordResetUsingEmailAddressExchange" TechnicalProfileReferenceId="LocalAccountDiscoveryUsingEmailAddress" />
          </ClaimsExchanges>
        </OrchestrationStep>
        <OrchestrationStep Order="2" Type="ClaimsExchange">
          <ClaimsExchanges>
            <ClaimsExchange Id="NewCredentials" TechnicalProfileReferenceId="LocalAccountWritePasswordUsingObjectId" />
          </ClaimsExchanges>
        </OrchestrationStep>
        <OrchestrationStep Order="3" Type="SendClaims" CpimIssuerTechnicalProfileReferenceId="JwtIssuer" />
      </OrchestrationSteps>
      <ClientDefinition ReferenceId="DefaultWeb" />
    </UserJourney>
 
  </UserJourneys>
</TrustFrameworkPolicy>
